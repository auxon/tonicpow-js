 <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>TonicPow Example</title>
    <base href="/"/>
    <script src="https://raw.githubusercontent.com/tonicpow/tonicpow-js/master/dist/bundle.min.js"></script>
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
    <script language="javascript">
      // On ready taken from https://stackoverflow.com/a/7053197
      function r(f){/in/.test(document.readyState)?setTimeout(r,9,f):f()}
      r(async () => {
        /*
        // When content loaded in page on ready, then run this code....
        var tonicpow = new TonicPow({
          advertiser_public_key: 'advertiser1',
        });
        var result = await tonicpow.getSessions('offerId');
        console.log('offerSessions', result);
        document.getElementById('results').innerHTML = JSON.stringify(result);
        */
      });

      $(document).ready(function(){
        var tonicpow = new TonicPow({
          advertiser_public_key: $('#advertiserPublicKey').val(),
        });

        $('#fetchSessions').click(async (e) => {
          var result = await tonicpow.getSessions($('#offerId').val());
          console.log('result', result);
          document.getElementById('results').innerHTML = JSON.stringify(result);
        });
      });
    </script>
  </head>
  <body>
    <a href="https://www.tonicpow.com">TonicPow.com</a>
    <a href="https://www.github.com/TonicPow/tonicpow-js">Github</a>
    <p>
      TonicPow session identifier will show up (if there is a session established):
    </p>

    Test

    Advertiser Public  Key
    <input type="text" id="advertiserPublicKey"/>

    Offer Id
    <input type="text" id="offerId"/>
    <button id="fetchSessions">Fetch Offer Session</button>

    <div id="results" style="word-break: break-word"></div>
  </body>
</html>
