 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="bitcoin-address" content="1LWyDs4qzmfAhGpSZk1K1kLmNdafBDdJSD">
    <meta name="author" content="@AttilaAros, @wildsatchmo, @mrz1818">
    <title>TonicPow - TonicJS Example</title>
    <base href="/"/>
    <script src="/dist/bundle.min.js"></script>
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
    <script type="application/javascript">
      // On ready taken from https://stackoverflow.com/a/7053197
      function r(f){/in/.test(document.readyState)?setTimeout(r,9,f):f()}
      r(async () => {
        let tonicPow = new TonicPow({
          advertiser_public_key: 'advertiser_public_key_cookie_f442ccc91f3f4ff9af3b20c2f877a4c8',
        });
        console.log('tonicPow', tonicPow);

        /*
        // When content loaded in page on ready, then run this code....
        var tonicPow = new TonicPow({
          advertiser_public_key: 'advertiser1',
        });
        var result = await tonicPow.getSessions('offerId');
        console.log('offerSessions', result);
        document.getElementById('results').innerHTML = JSON.stringify(result);
        */
      });

      $(document).ready(function(){
        let tonicPow = new TonicPow({
          advertiser_public_key: $('#advertiserPublicKey').val(),
        });
        console.log('tonicPow', tonicPow);
        $('#fetchSessions').click(async (e) => {
          let result = await tonicPow.api.getSession($('#offerId').val());
          console.log('result', result);
          document.getElementById('results').innerHTML = JSON.stringify(result);
        });
      });
    </script>
  </head>
  <body>
    <a href="https://www.tonicpow.com/?af=tonicpow-js-example">TonicPow.com</a>
    <a href="https://www.github.com/TonicPow/tonicpow-js">Github</a>
    <p>
      TonicPow session identifier will show up (if there is a session established):
    </p>

    Test

    Advertiser Public  Key
    <input type="text" id="advertiserPublicKey"/>

    Offer Id
    <input type="text" id="offerId"/>
    <button id="fetchSessions">Fetch Offer Session</button>

    <div id="results" style="word-break: break-word"></div>
  </body>
</html>
